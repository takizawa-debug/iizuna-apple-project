<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDX Preview (Iizuna Apple Project)</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
        .peraichi-mock { border: 2px dashed #ccc; padding: 40px; text-align: center; color: #666; }
    </style>
</head>
<body>
    <div class="peraichi-mock">
        <h2>ここにペライチのコンテンツが表示されます</h2>
        <p>JSが読み込まれると、ヘッダーやモーダルが動き出します。</p>
    </div>

    <script>
      (function() {
        var v = new Date().getTime(); 
        var base = "./"; // IDX内では相対パスで読み込みます

        var files = [
          { t: 'js',  u: base + "config.js" },
          { t: 'js',  u: base + "common.js" },
          { t: 'js',  u: base + "slideshow.js" },
          { t: 'js',  u: base + "header.js" },
          { t: 'js',  u: base + "section.js" },
          { t: 'js',  u: base + "sidenav.js" },
          { t: 'js',  u: base + "modal-search.js" },
          { t: 'js',  u: base + "modal.js" },
          { t: 'js',  u: base + "search.js" },
          { t: 'js',  u: base + "footer.js" },
          { t: 'js',  u: base + "analytics.js" }
        ];

        function load(i) {
          if (i >= files.length) {
              console.log("IDX Preview: All loaded.");
              return;
          }
          var f = files[i];
          var url = f.u + "?v=" + v;
          var el;
          if (f.t === 'js') {
            el = document.createElement('script');
            el.src = url;
            el.async = false;
            el.onload = function() { load(i + 1); };
            document.head.appendChild(el);
          }
        }
        load(0);
      })();
    </script>
</body>
</html>